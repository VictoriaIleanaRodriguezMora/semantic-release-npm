"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@makotot";
exports.ids = ["vendor-chunks/@makotot"];
exports.modules = {

/***/ "(ssr)/../node_modules/@makotot/ghostui/dist/ghostui.cjs.development.js":
/*!************************************************************************!*\
  !*** ../node_modules/@makotot/ghostui/dist/ghostui.cjs.development.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar react = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nvar debounce = function debounce(callback) {\n  var reqID = null;\n\n  var exec = function exec(args) {\n    return function () {\n      // @ts-ignore TS2488\n      callback.apply(void 0, args);\n    };\n  };\n\n  return function () {\n    if (reqID) {\n      cancelAnimationFrame(reqID);\n    }\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    reqID = requestAnimationFrame(exec(args));\n  };\n};\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar ReadingProgressCore = function ReadingProgressCore() {};\n\nvar ReadingProgressWindow = /*#__PURE__*/function (_ReadingProgressCore) {\n  _inheritsLoose(ReadingProgressWindow, _ReadingProgressCore);\n\n  function ReadingProgressWindow() {\n    var _this;\n\n    _this = _ReadingProgressCore.apply(this, arguments) || this;\n\n    _this.measureWrapperHeight = function () {\n      var targetElHeihgt = document.body.getBoundingClientRect().height || 0;\n      return Math.round(targetElHeihgt - _this.getViewportHeight());\n    };\n\n    _this.getViewportHeight = function () {\n      return Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    };\n\n    _this.getProgress = function () {\n      var top = window.pageYOffset || document.documentElement.scrollTop;\n      return Math.round(top / _this.measureWrapperHeight() * 100);\n    };\n\n    return _this;\n  }\n\n  _createClass(ReadingProgressWindow, [{\n    key: \"rootSelector\",\n    get: function get() {\n      return window;\n    }\n  }]);\n\n  return ReadingProgressWindow;\n}(ReadingProgressCore);\n\nvar ReadingProgressElement = /*#__PURE__*/function (_ReadingProgressCore2) {\n  _inheritsLoose(ReadingProgressElement, _ReadingProgressCore2);\n\n  function ReadingProgressElement(_ref) {\n    var _this2;\n\n    var rootEl = _ref.rootEl,\n        targetEl = _ref.targetEl;\n    _this2 = _ReadingProgressCore2.call(this) || this;\n\n    _this2.measureWrapperHeight = function () {\n      var _this2$targetEl;\n\n      var targetElHeight = ((_this2$targetEl = _this2.targetEl) == null ? void 0 : _this2$targetEl.getBoundingClientRect().height) || 0;\n      return Math.round(targetElHeight - _this2.getViewportHeight());\n    };\n\n    _this2.getViewportHeight = function () {\n      var _this2$rootEl;\n\n      return ((_this2$rootEl = _this2.rootEl) == null ? void 0 : _this2$rootEl.clientHeight) || 0;\n    };\n\n    _this2.getProgress = function () {\n      var _this2$rootEl2;\n\n      var top = ((_this2$rootEl2 = _this2.rootEl) == null ? void 0 : _this2$rootEl2.scrollTop) || 0;\n      return Math.round(top / _this2.measureWrapperHeight() * 100);\n    };\n\n    _this2.rootEl = document.querySelector(rootEl);\n    _this2.targetEl = document.querySelector(targetEl);\n    return _this2;\n  }\n\n  _createClass(ReadingProgressElement, [{\n    key: \"rootSelector\",\n    get: function get() {\n      return this.rootEl;\n    }\n  }]);\n\n  return ReadingProgressElement;\n}(ReadingProgressCore);\n\nvar ReadingProgress = /*#__PURE__*/function () {\n  function ReadingProgress(_ref2) {\n    var _this3 = this;\n\n    var rootEl = _ref2.rootEl,\n        targetEl = _ref2.targetEl;\n\n    this.getViewportHeight = function () {\n      return _this3.rp.getViewportHeight();\n    };\n\n    this.getProgress = function () {\n      return _this3.rp.getProgress();\n    };\n\n    this.rp = typeof rootEl === 'string' && typeof targetEl === 'string' ? new ReadingProgressElement({\n      rootEl: rootEl,\n      targetEl: targetEl\n    }) : new ReadingProgressWindow();\n  }\n\n  _createClass(ReadingProgress, [{\n    key: \"rootSelector\",\n    get: function get() {\n      return this.rp.rootSelector;\n    }\n  }]);\n\n  return ReadingProgress;\n}();\n\nvar useReadingProgress = function useReadingProgress(props) {\n  var _rp$current;\n\n  var rp = react.useRef();\n  react.useEffect(function () {\n    rp.current = new ReadingProgress({\n      rootEl: props == null ? void 0 : props.rootEl,\n      targetEl: props == null ? void 0 : props.targetEl\n    });\n  }, [props]);\n\n  var _useState = react.useState(((_rp$current = rp.current) == null ? void 0 : _rp$current.getProgress()) || 0),\n      value = _useState[0],\n      updateProgressValue = _useState[1];\n\n  var update = react.useCallback(function () {\n    var _rp$current2;\n\n    updateProgressValue(((_rp$current2 = rp.current) == null ? void 0 : _rp$current2.getProgress()) || 0);\n  }, []);\n  var debounceUpdate = react.useCallback(debounce(function () {\n    update();\n  }), []);\n  react.useEffect(function () {\n    var _rp$current3;\n\n    if ((_rp$current3 = rp.current) != null && _rp$current3.rootSelector) {\n      rp.current.rootSelector.addEventListener('scroll', debounceUpdate);\n    }\n\n    window.addEventListener('resize', debounceUpdate);\n    update();\n    return function () {\n      var _rp$current4;\n\n      if ((_rp$current4 = rp.current) != null && _rp$current4.rootSelector) {\n        rp.current.rootSelector.removeEventListener('scroll', debounceUpdate);\n      }\n\n      window.removeEventListener('resize', debounceUpdate);\n    };\n  }, [update, debounceUpdate]);\n  return {\n    value: value\n  };\n};\n\nvar ReadingProgress$1 = function ReadingProgress(_ref) {\n  var targetEl = _ref.targetEl,\n      rootEl = _ref.rootEl,\n      children = _ref.children;\n  var readingProgress = useReadingProgress({\n    targetEl: targetEl,\n    rootEl: rootEl\n  });\n  return children(readingProgress);\n};\n\nvar Root = function Root() {};\n\nvar RootEl = /*#__PURE__*/function (_Root) {\n  _inheritsLoose(RootEl, _Root);\n\n  function RootEl(el) {\n    var _this;\n\n    _this = _Root.call(this) || this;\n    _this.el = el;\n    return _this;\n  }\n\n  var _proto = RootEl.prototype;\n\n  _proto.isScrolledToBottom = function isScrolledToBottom() {\n    return this.scrollTop + this.outerHeight >= this.scrollHeight;\n  };\n\n  _proto.registerScrollEvent = function registerScrollEvent(callback) {\n    this.el.addEventListener('scroll', callback);\n  };\n\n  _proto.unregisterScrollEvent = function unregisterScrollEvent(callback) {\n    this.el.removeEventListener('scroll', callback);\n  };\n\n  RootEl.create = function create(selector) {\n    var el = document.querySelector(selector);\n\n    if (!el) {\n      throw new Error('element is not found.');\n    }\n\n    return new RootEl(el);\n  };\n\n  _createClass(RootEl, [{\n    key: \"top\",\n    get: function get() {\n      return this.el.getBoundingClientRect().top;\n    }\n  }, {\n    key: \"outerHeight\",\n    get: function get() {\n      return this.el.getBoundingClientRect().height;\n    }\n  }, {\n    key: \"scrollTop\",\n    get: function get() {\n      return this.el.scrollTop;\n    }\n  }, {\n    key: \"scrollHeight\",\n    get: function get() {\n      return this.el.scrollHeight;\n    }\n  }]);\n\n  return RootEl;\n}(Root);\n\nvar RootWindow = /*#__PURE__*/function (_Root) {\n  _inheritsLoose(RootWindow, _Root);\n\n  function RootWindow() {\n    return _Root.apply(this, arguments) || this;\n  }\n\n  var _proto = RootWindow.prototype;\n\n  _proto.isScrolledToBottom = function isScrolledToBottom() {\n    return this.scrollTop + this.outerHeight >= this.scrollHeight;\n  };\n\n  _proto.registerScrollEvent = function registerScrollEvent(callback) {\n    document.addEventListener('scroll', callback);\n  };\n\n  _proto.unregisterScrollEvent = function unregisterScrollEvent(callback) {\n    document.removeEventListener('scroll', callback);\n  };\n\n  RootWindow.create = function create() {\n    return new RootWindow();\n  };\n\n  _createClass(RootWindow, [{\n    key: \"outerHeight\",\n    get: function get() {\n      return window.innerHeight;\n    }\n  }, {\n    key: \"scrollTop\",\n    get: function get() {\n      return document.documentElement.scrollTop;\n    }\n  }, {\n    key: \"scrollHeight\",\n    get: function get() {\n      return document.documentElement.scrollHeight;\n    }\n  }]);\n\n  return RootWindow;\n}(Root);\n\nvar RootFactory = /*#__PURE__*/function () {\n  function RootFactory() {}\n\n  RootFactory.create = function create(selector) {\n    if (!selector) {\n      return RootWindow.create();\n    }\n\n    return RootEl.create(selector);\n  };\n\n  return RootFactory;\n}();\n\nvar useScrollspy = function useScrollspy(_ref) {\n  var sectionRefs = _ref.sectionRefs,\n      rootSelector = _ref.rootSelector,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? 0 : _ref$offset;\n  var rootEl = react.useRef(null);\n  react.useEffect(function () {\n    rootEl.current = RootFactory.create(rootSelector);\n  }, [rootSelector]);\n  var isScrolledToBottom = react.useCallback(function () {\n    if (!rootEl.current) {\n      return false;\n    }\n\n    return rootEl.current.isScrolledToBottom();\n  }, [rootEl]);\n  var isElementInViewport = react.useCallback(function (element) {\n    if (!rootEl.current) {\n      return false;\n    }\n\n    var innerScrollTop = rootEl.current.scrollTop;\n    var innerScrollBottom = innerScrollTop + rootEl.current.outerHeight;\n    var elementRect = element.getBoundingClientRect();\n    var elementScrollTop = rootEl.current instanceof RootEl ? innerScrollTop + elementRect.top - rootEl.current.top + offset : innerScrollTop + elementRect.top + offset;\n    var elementScrollBottom = elementScrollTop + elementRect.height;\n    return [elementScrollTop < innerScrollBottom, elementScrollBottom > innerScrollTop].every(function (v) {\n      return v;\n    });\n  }, [rootEl, offset]);\n  var getElementsStatusInViewport = react.useCallback(function () {\n    return sectionRefs.map(function (sectionRef) {\n      if (sectionRef.current) {\n        return isElementInViewport(sectionRef.current);\n      }\n\n      return false;\n    });\n  }, [isElementInViewport, sectionRefs]);\n\n  var _useState = react.useState([]),\n      elementsStatusInViewport = _useState[0],\n      updateElementsStatusInViewport = _useState[1];\n\n  var currentElementIndexInViewport = react.useMemo(function () {\n    return elementsStatusInViewport.findIndex(function (status) {\n      return status;\n    });\n  }, [elementsStatusInViewport]);\n  var spy = react.useCallback(function () {\n    var newElementsStatusInViewport = isScrolledToBottom() ? [].concat(new Array(sectionRefs.length - 1).fill(false).map(function (v) {\n      return v;\n    }), [true]) : getElementsStatusInViewport();\n    updateElementsStatusInViewport(newElementsStatusInViewport);\n  }, [getElementsStatusInViewport, isScrolledToBottom, sectionRefs]);\n  react.useEffect(function () {\n    spy();\n\n    if (rootEl.current) {\n      rootEl.current.registerScrollEvent(spy);\n    }\n\n    return function () {\n      if (rootEl.current) {\n        rootEl.current.unregisterScrollEvent(spy);\n      }\n    };\n  }, [spy]);\n  return {\n    elementsStatusInViewport: elementsStatusInViewport,\n    currentElementIndexInViewport: currentElementIndexInViewport\n  };\n};\n\nvar Scrollspy = function Scrollspy(_ref) {\n  var children = _ref.children,\n      sectionRefs = _ref.sectionRefs,\n      rootSelector = _ref.rootSelector,\n      offset = _ref.offset;\n\n  var _useScrollspy = useScrollspy({\n    sectionRefs: sectionRefs,\n    rootSelector: rootSelector,\n    offset: offset\n  }),\n      elementsStatusInViewport = _useScrollspy.elementsStatusInViewport,\n      currentElementIndexInViewport = _useScrollspy.currentElementIndexInViewport;\n\n  return children({\n    elementsStatusInViewport: elementsStatusInViewport,\n    currentElementIndexInViewport: currentElementIndexInViewport\n  });\n};\n\nvar Pagination = function Pagination(_ref) {\n  var _this = this;\n\n  var currentPage = _ref.currentPage,\n      totalPage = _ref.totalPage,\n      _ref$middlePagesSibli = _ref.middlePagesSiblingCount,\n      middlePagesSiblingCount = _ref$middlePagesSibli === void 0 ? 2 : _ref$middlePagesSibli,\n      _ref$edgePageCount = _ref.edgePageCount,\n      edgePageCount = _ref$edgePageCount === void 0 ? 2 : _ref$edgePageCount;\n\n  this.getAllPages = function () {\n    return [].concat(Array(_this.totalPage)).fill(1).map(function (_, i) {\n      return i + 1;\n    });\n  };\n\n  this.getMiddlePageCount = function () {\n    return _this.middlePagesSiblingCount * 2 + 1;\n  };\n\n  this.isReachedToFirst = function () {\n    return _this.currentPage <= _this.middlePagesSiblingCount;\n  };\n\n  this.isReachedToLast = function () {\n    return _this.currentPage + _this.middlePagesSiblingCount >= _this.totalPage;\n  };\n\n  this.getAllPreviousPages = function () {\n    return _this.getAllPages().slice(0, _this.getMiddlePages()[0] - 1);\n  };\n\n  this.getAllNextPages = function () {\n    var totalPageItems = _this.getAllPages();\n\n    var middlePages = _this.getMiddlePages();\n\n    return totalPageItems.slice(middlePages[middlePages.length - 1], totalPageItems[totalPageItems.length]);\n  };\n\n  this.hasPreviousPage = function () {\n    return _this.currentPage > 1;\n  };\n\n  this.hasNextPage = function () {\n    return _this.totalPage > _this.currentPage;\n  };\n\n  this.getMiddlePages = function () {\n    var totalPageItems = _this.getAllPages();\n\n    var middlePageCount = _this.getMiddlePageCount();\n\n    if (_this.isReachedToFirst()) {\n      return totalPageItems.slice(0, middlePageCount);\n    }\n\n    if (_this.isReachedToLast()) {\n      return totalPageItems.slice(-middlePageCount);\n    }\n\n    return totalPageItems.slice(_this.currentPage - _this.middlePagesSiblingCount - 1, _this.currentPage + _this.middlePagesSiblingCount);\n  };\n\n  this.getPreviousPages = function () {\n    if (_this.isReachedToFirst()) {\n      return [];\n    }\n\n    if (_this.getAllPreviousPages().length < 1) {\n      return [];\n    }\n\n    return _this.getAllPages().slice(0, _this.edgePageCount).filter(function (p) {\n      return !_this.getMiddlePages().includes(p);\n    });\n  };\n\n  this.getNextPages = function () {\n    if (_this.isReachedToLast()) {\n      return [];\n    }\n\n    if (_this.getAllNextPages().length < 1) {\n      return [];\n    }\n\n    var totalPages = _this.getAllPages();\n\n    return totalPages.slice(totalPages.length - _this.edgePageCount, totalPages.length).filter(function (p) {\n      return !_this.getMiddlePages().includes(p);\n    });\n  };\n\n  this.isPreviousTruncable = function () {\n    return _this.getAllPreviousPages().filter(function (p) {\n      return !_this.getPreviousPages().includes(p) && !_this.getMiddlePages().includes(p);\n    }).length > 0;\n  };\n\n  this.isNextTruncable = function () {\n    return _this.getAllNextPages().filter(function (p) {\n      return !_this.getNextPages().includes(p) && !_this.getMiddlePages().includes(p);\n    }).length > 0;\n  };\n\n  this.currentPage = currentPage;\n  this.totalPage = totalPage;\n  this.middlePagesSiblingCount = middlePagesSiblingCount;\n  this.edgePageCount = edgePageCount;\n};\n\nvar MIDDLE_PAGES_SIBLING_COUNT = 2;\nvar EDGE_PAGE_COUNT = 2;\nvar usePagination = function usePagination(_ref) {\n  var totalPage = _ref.totalPage,\n      currentPage = _ref.currentPage,\n      _ref$middlePagesSibli = _ref.middlePagesSiblingCount,\n      middlePagesSiblingCount = _ref$middlePagesSibli === void 0 ? MIDDLE_PAGES_SIBLING_COUNT : _ref$middlePagesSibli,\n      _ref$edgePageCount = _ref.edgePageCount,\n      edgePageCount = _ref$edgePageCount === void 0 ? EDGE_PAGE_COUNT : _ref$edgePageCount;\n  var pagination = react.useMemo(function () {\n    return new Pagination({\n      totalPage: totalPage,\n      currentPage: currentPage,\n      middlePagesSiblingCount: middlePagesSiblingCount,\n      edgePageCount: edgePageCount\n    });\n  }, [totalPage, currentPage, middlePagesSiblingCount, edgePageCount]);\n  return {\n    getMiddlePages: pagination.getMiddlePages,\n    hasPreviousPage: pagination.hasPreviousPage,\n    hasNextPage: pagination.hasNextPage,\n    getPreviousPages: pagination.getPreviousPages,\n    getNextPages: pagination.getNextPages,\n    isPreviousTruncable: pagination.isPreviousTruncable,\n    isNextTruncable: pagination.isNextTruncable,\n    totalPage: totalPage,\n    currentPage: currentPage\n  };\n};\n\nvar Pagination$1 = function Pagination(_ref) {\n  var children = _ref.children,\n      totalPage = _ref.totalPage,\n      currentPage = _ref.currentPage,\n      middlePagesSiblingCount = _ref.middlePagesSiblingCount,\n      edgePageCount = _ref.edgePageCount;\n  var pagination = usePagination({\n    totalPage: totalPage,\n    currentPage: currentPage,\n    middlePagesSiblingCount: middlePagesSiblingCount,\n    edgePageCount: edgePageCount\n  });\n  return children(pagination);\n};\n\nexports.Pagination = Pagination$1;\nexports.ReadingProgress = ReadingProgress$1;\nexports.Scrollspy = Scrollspy;\nexports.usePagination = usePagination;\nexports.useReadingProgress = useReadingProgress;\nexports.useScrollspy = useScrollspy;\n//# sourceMappingURL=ghostui.cjs.development.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BtYWtvdG90L2dob3N0dWkvZGlzdC9naG9zdHVpLmNqcy5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7O0FBRTdELFlBQVksbUJBQU8sQ0FBQyx3R0FBTzs7QUFFM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0VBQXdFLGFBQWE7QUFDckY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxrQkFBa0I7QUFDbEIsdUJBQXVCO0FBQ3ZCLGlCQUFpQjtBQUNqQixxQkFBcUI7QUFDckIsMEJBQTBCO0FBQzFCLG9CQUFvQjtBQUNwQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250Ly4uL25vZGVfbW9kdWxlcy9AbWFrb3RvdC9naG9zdHVpL2Rpc3QvZ2hvc3R1aS5janMuZGV2ZWxvcG1lbnQuanM/NWIzOSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciByZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uIGRlYm91bmNlKGNhbGxiYWNrKSB7XG4gIHZhciByZXFJRCA9IG51bGw7XG5cbiAgdmFyIGV4ZWMgPSBmdW5jdGlvbiBleGVjKGFyZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gQHRzLWlnbm9yZSBUUzI0ODhcbiAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChyZXFJRCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxSUQpO1xuICAgIH1cblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXFJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShleGVjKGFyZ3MpKTtcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuXG4gIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG52YXIgUmVhZGluZ1Byb2dyZXNzQ29yZSA9IGZ1bmN0aW9uIFJlYWRpbmdQcm9ncmVzc0NvcmUoKSB7fTtcblxudmFyIFJlYWRpbmdQcm9ncmVzc1dpbmRvdyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWRpbmdQcm9ncmVzc0NvcmUpIHtcbiAgX2luaGVyaXRzTG9vc2UoUmVhZGluZ1Byb2dyZXNzV2luZG93LCBfUmVhZGluZ1Byb2dyZXNzQ29yZSk7XG5cbiAgZnVuY3Rpb24gUmVhZGluZ1Byb2dyZXNzV2luZG93KCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1JlYWRpbmdQcm9ncmVzc0NvcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMubWVhc3VyZVdyYXBwZXJIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGFyZ2V0RWxIZWloZ3QgPSBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCB8fCAwO1xuICAgICAgcmV0dXJuIE1hdGgucm91bmQodGFyZ2V0RWxIZWloZ3QgLSBfdGhpcy5nZXRWaWV3cG9ydEhlaWdodCgpKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0Vmlld3BvcnRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IDApO1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRQcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0b3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRvcCAvIF90aGlzLm1lYXN1cmVXcmFwcGVySGVpZ2h0KCkgKiAxMDApO1xuICAgIH07XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVhZGluZ1Byb2dyZXNzV2luZG93LCBbe1xuICAgIGtleTogXCJyb290U2VsZWN0b3JcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlYWRpbmdQcm9ncmVzc1dpbmRvdztcbn0oUmVhZGluZ1Byb2dyZXNzQ29yZSk7XG5cbnZhciBSZWFkaW5nUHJvZ3Jlc3NFbGVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhZGluZ1Byb2dyZXNzQ29yZTIpIHtcbiAgX2luaGVyaXRzTG9vc2UoUmVhZGluZ1Byb2dyZXNzRWxlbWVudCwgX1JlYWRpbmdQcm9ncmVzc0NvcmUyKTtcblxuICBmdW5jdGlvbiBSZWFkaW5nUHJvZ3Jlc3NFbGVtZW50KF9yZWYpIHtcbiAgICB2YXIgX3RoaXMyO1xuXG4gICAgdmFyIHJvb3RFbCA9IF9yZWYucm9vdEVsLFxuICAgICAgICB0YXJnZXRFbCA9IF9yZWYudGFyZ2V0RWw7XG4gICAgX3RoaXMyID0gX1JlYWRpbmdQcm9ncmVzc0NvcmUyLmNhbGwodGhpcykgfHwgdGhpcztcblxuICAgIF90aGlzMi5tZWFzdXJlV3JhcHBlckhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdGhpczIkdGFyZ2V0RWw7XG5cbiAgICAgIHZhciB0YXJnZXRFbEhlaWdodCA9ICgoX3RoaXMyJHRhcmdldEVsID0gX3RoaXMyLnRhcmdldEVsKSA9PSBudWxsID8gdm9pZCAwIDogX3RoaXMyJHRhcmdldEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCkgfHwgMDtcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRhcmdldEVsSGVpZ2h0IC0gX3RoaXMyLmdldFZpZXdwb3J0SGVpZ2h0KCkpO1xuICAgIH07XG5cbiAgICBfdGhpczIuZ2V0Vmlld3BvcnRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3RoaXMyJHJvb3RFbDtcblxuICAgICAgcmV0dXJuICgoX3RoaXMyJHJvb3RFbCA9IF90aGlzMi5yb290RWwpID09IG51bGwgPyB2b2lkIDAgOiBfdGhpczIkcm9vdEVsLmNsaWVudEhlaWdodCkgfHwgMDtcbiAgICB9O1xuXG4gICAgX3RoaXMyLmdldFByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF90aGlzMiRyb290RWwyO1xuXG4gICAgICB2YXIgdG9wID0gKChfdGhpczIkcm9vdEVsMiA9IF90aGlzMi5yb290RWwpID09IG51bGwgPyB2b2lkIDAgOiBfdGhpczIkcm9vdEVsMi5zY3JvbGxUb3ApIHx8IDA7XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZCh0b3AgLyBfdGhpczIubWVhc3VyZVdyYXBwZXJIZWlnaHQoKSAqIDEwMCk7XG4gICAgfTtcblxuICAgIF90aGlzMi5yb290RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHJvb3RFbCk7XG4gICAgX3RoaXMyLnRhcmdldEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRFbCk7XG4gICAgcmV0dXJuIF90aGlzMjtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSZWFkaW5nUHJvZ3Jlc3NFbGVtZW50LCBbe1xuICAgIGtleTogXCJyb290U2VsZWN0b3JcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJvb3RFbDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVhZGluZ1Byb2dyZXNzRWxlbWVudDtcbn0oUmVhZGluZ1Byb2dyZXNzQ29yZSk7XG5cbnZhciBSZWFkaW5nUHJvZ3Jlc3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSZWFkaW5nUHJvZ3Jlc3MoX3JlZjIpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciByb290RWwgPSBfcmVmMi5yb290RWwsXG4gICAgICAgIHRhcmdldEVsID0gX3JlZjIudGFyZ2V0RWw7XG5cbiAgICB0aGlzLmdldFZpZXdwb3J0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzMy5ycC5nZXRWaWV3cG9ydEhlaWdodCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzMy5ycC5nZXRQcm9ncmVzcygpO1xuICAgIH07XG5cbiAgICB0aGlzLnJwID0gdHlwZW9mIHJvb3RFbCA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHRhcmdldEVsID09PSAnc3RyaW5nJyA/IG5ldyBSZWFkaW5nUHJvZ3Jlc3NFbGVtZW50KHtcbiAgICAgIHJvb3RFbDogcm9vdEVsLFxuICAgICAgdGFyZ2V0RWw6IHRhcmdldEVsXG4gICAgfSkgOiBuZXcgUmVhZGluZ1Byb2dyZXNzV2luZG93KCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVhZGluZ1Byb2dyZXNzLCBbe1xuICAgIGtleTogXCJyb290U2VsZWN0b3JcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJwLnJvb3RTZWxlY3RvcjtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVhZGluZ1Byb2dyZXNzO1xufSgpO1xuXG52YXIgdXNlUmVhZGluZ1Byb2dyZXNzID0gZnVuY3Rpb24gdXNlUmVhZGluZ1Byb2dyZXNzKHByb3BzKSB7XG4gIHZhciBfcnAkY3VycmVudDtcblxuICB2YXIgcnAgPSByZWFjdC51c2VSZWYoKTtcbiAgcmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBycC5jdXJyZW50ID0gbmV3IFJlYWRpbmdQcm9ncmVzcyh7XG4gICAgICByb290RWw6IHByb3BzID09IG51bGwgPyB2b2lkIDAgOiBwcm9wcy5yb290RWwsXG4gICAgICB0YXJnZXRFbDogcHJvcHMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3BzLnRhcmdldEVsXG4gICAgfSk7XG4gIH0sIFtwcm9wc10pO1xuXG4gIHZhciBfdXNlU3RhdGUgPSByZWFjdC51c2VTdGF0ZSgoKF9ycCRjdXJyZW50ID0gcnAuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9ycCRjdXJyZW50LmdldFByb2dyZXNzKCkpIHx8IDApLFxuICAgICAgdmFsdWUgPSBfdXNlU3RhdGVbMF0sXG4gICAgICB1cGRhdGVQcm9ncmVzc1ZhbHVlID0gX3VzZVN0YXRlWzFdO1xuXG4gIHZhciB1cGRhdGUgPSByZWFjdC51c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9ycCRjdXJyZW50MjtcblxuICAgIHVwZGF0ZVByb2dyZXNzVmFsdWUoKChfcnAkY3VycmVudDIgPSBycC5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX3JwJGN1cnJlbnQyLmdldFByb2dyZXNzKCkpIHx8IDApO1xuICB9LCBbXSk7XG4gIHZhciBkZWJvdW5jZVVwZGF0ZSA9IHJlYWN0LnVzZUNhbGxiYWNrKGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICB1cGRhdGUoKTtcbiAgfSksIFtdKTtcbiAgcmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JwJGN1cnJlbnQzO1xuXG4gICAgaWYgKChfcnAkY3VycmVudDMgPSBycC5jdXJyZW50KSAhPSBudWxsICYmIF9ycCRjdXJyZW50My5yb290U2VsZWN0b3IpIHtcbiAgICAgIHJwLmN1cnJlbnQucm9vdFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGRlYm91bmNlVXBkYXRlKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVib3VuY2VVcGRhdGUpO1xuICAgIHVwZGF0ZSgpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3JwJGN1cnJlbnQ0O1xuXG4gICAgICBpZiAoKF9ycCRjdXJyZW50NCA9IHJwLmN1cnJlbnQpICE9IG51bGwgJiYgX3JwJGN1cnJlbnQ0LnJvb3RTZWxlY3Rvcikge1xuICAgICAgICBycC5jdXJyZW50LnJvb3RTZWxlY3Rvci5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBkZWJvdW5jZVVwZGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZVVwZGF0ZSk7XG4gICAgfTtcbiAgfSwgW3VwZGF0ZSwgZGVib3VuY2VVcGRhdGVdKTtcbiAgcmV0dXJuIHtcbiAgICB2YWx1ZTogdmFsdWVcbiAgfTtcbn07XG5cbnZhciBSZWFkaW5nUHJvZ3Jlc3MkMSA9IGZ1bmN0aW9uIFJlYWRpbmdQcm9ncmVzcyhfcmVmKSB7XG4gIHZhciB0YXJnZXRFbCA9IF9yZWYudGFyZ2V0RWwsXG4gICAgICByb290RWwgPSBfcmVmLnJvb3RFbCxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgdmFyIHJlYWRpbmdQcm9ncmVzcyA9IHVzZVJlYWRpbmdQcm9ncmVzcyh7XG4gICAgdGFyZ2V0RWw6IHRhcmdldEVsLFxuICAgIHJvb3RFbDogcm9vdEVsXG4gIH0pO1xuICByZXR1cm4gY2hpbGRyZW4ocmVhZGluZ1Byb2dyZXNzKTtcbn07XG5cbnZhciBSb290ID0gZnVuY3Rpb24gUm9vdCgpIHt9O1xuXG52YXIgUm9vdEVsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUm9vdCkge1xuICBfaW5oZXJpdHNMb29zZShSb290RWwsIF9Sb290KTtcblxuICBmdW5jdGlvbiBSb290RWwoZWwpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9Sb290LmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy5lbCA9IGVsO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBSb290RWwucHJvdG90eXBlO1xuXG4gIF9wcm90by5pc1Njcm9sbGVkVG9Cb3R0b20gPSBmdW5jdGlvbiBpc1Njcm9sbGVkVG9Cb3R0b20oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsVG9wICsgdGhpcy5vdXRlckhlaWdodCA+PSB0aGlzLnNjcm9sbEhlaWdodDtcbiAgfTtcblxuICBfcHJvdG8ucmVnaXN0ZXJTY3JvbGxFdmVudCA9IGZ1bmN0aW9uIHJlZ2lzdGVyU2Nyb2xsRXZlbnQoY2FsbGJhY2spIHtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBfcHJvdG8udW5yZWdpc3RlclNjcm9sbEV2ZW50ID0gZnVuY3Rpb24gdW5yZWdpc3RlclNjcm9sbEV2ZW50KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjYWxsYmFjayk7XG4gIH07XG5cbiAgUm9vdEVsLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShzZWxlY3Rvcikge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXG4gICAgaWYgKCFlbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbGVtZW50IGlzIG5vdCBmb3VuZC4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJvb3RFbChlbCk7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFJvb3RFbCwgW3tcbiAgICBrZXk6IFwidG9wXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm91dGVySGVpZ2h0XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNjcm9sbFRvcFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWwuc2Nyb2xsVG9wO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzY3JvbGxIZWlnaHRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsLnNjcm9sbEhlaWdodDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUm9vdEVsO1xufShSb290KTtcblxudmFyIFJvb3RXaW5kb3cgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Sb290KSB7XG4gIF9pbmhlcml0c0xvb3NlKFJvb3RXaW5kb3csIF9Sb290KTtcblxuICBmdW5jdGlvbiBSb290V2luZG93KCkge1xuICAgIHJldHVybiBfUm9vdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gUm9vdFdpbmRvdy5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmlzU2Nyb2xsZWRUb0JvdHRvbSA9IGZ1bmN0aW9uIGlzU2Nyb2xsZWRUb0JvdHRvbSgpIHtcbiAgICByZXR1cm4gdGhpcy5zY3JvbGxUb3AgKyB0aGlzLm91dGVySGVpZ2h0ID49IHRoaXMuc2Nyb2xsSGVpZ2h0O1xuICB9O1xuXG4gIF9wcm90by5yZWdpc3RlclNjcm9sbEV2ZW50ID0gZnVuY3Rpb24gcmVnaXN0ZXJTY3JvbGxFdmVudChjYWxsYmFjaykge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBfcHJvdG8udW5yZWdpc3RlclNjcm9sbEV2ZW50ID0gZnVuY3Rpb24gdW5yZWdpc3RlclNjcm9sbEV2ZW50KGNhbGxiYWNrKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgY2FsbGJhY2spO1xuICB9O1xuXG4gIFJvb3RXaW5kb3cuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIHJldHVybiBuZXcgUm9vdFdpbmRvdygpO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhSb290V2luZG93LCBbe1xuICAgIGtleTogXCJvdXRlckhlaWdodFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2Nyb2xsVG9wXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2Nyb2xsSGVpZ2h0XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUm9vdFdpbmRvdztcbn0oUm9vdCk7XG5cbnZhciBSb290RmFjdG9yeSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFJvb3RGYWN0b3J5KCkge31cblxuICBSb290RmFjdG9yeS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoc2VsZWN0b3IpIHtcbiAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gUm9vdFdpbmRvdy5jcmVhdGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUm9vdEVsLmNyZWF0ZShzZWxlY3Rvcik7XG4gIH07XG5cbiAgcmV0dXJuIFJvb3RGYWN0b3J5O1xufSgpO1xuXG52YXIgdXNlU2Nyb2xsc3B5ID0gZnVuY3Rpb24gdXNlU2Nyb2xsc3B5KF9yZWYpIHtcbiAgdmFyIHNlY3Rpb25SZWZzID0gX3JlZi5zZWN0aW9uUmVmcyxcbiAgICAgIHJvb3RTZWxlY3RvciA9IF9yZWYucm9vdFNlbGVjdG9yLFxuICAgICAgX3JlZiRvZmZzZXQgPSBfcmVmLm9mZnNldCxcbiAgICAgIG9mZnNldCA9IF9yZWYkb2Zmc2V0ID09PSB2b2lkIDAgPyAwIDogX3JlZiRvZmZzZXQ7XG4gIHZhciByb290RWwgPSByZWFjdC51c2VSZWYobnVsbCk7XG4gIHJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcm9vdEVsLmN1cnJlbnQgPSBSb290RmFjdG9yeS5jcmVhdGUocm9vdFNlbGVjdG9yKTtcbiAgfSwgW3Jvb3RTZWxlY3Rvcl0pO1xuICB2YXIgaXNTY3JvbGxlZFRvQm90dG9tID0gcmVhY3QudXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIGlmICghcm9vdEVsLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdEVsLmN1cnJlbnQuaXNTY3JvbGxlZFRvQm90dG9tKCk7XG4gIH0sIFtyb290RWxdKTtcbiAgdmFyIGlzRWxlbWVudEluVmlld3BvcnQgPSByZWFjdC51c2VDYWxsYmFjayhmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGlmICghcm9vdEVsLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgaW5uZXJTY3JvbGxUb3AgPSByb290RWwuY3VycmVudC5zY3JvbGxUb3A7XG4gICAgdmFyIGlubmVyU2Nyb2xsQm90dG9tID0gaW5uZXJTY3JvbGxUb3AgKyByb290RWwuY3VycmVudC5vdXRlckhlaWdodDtcbiAgICB2YXIgZWxlbWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBlbGVtZW50U2Nyb2xsVG9wID0gcm9vdEVsLmN1cnJlbnQgaW5zdGFuY2VvZiBSb290RWwgPyBpbm5lclNjcm9sbFRvcCArIGVsZW1lbnRSZWN0LnRvcCAtIHJvb3RFbC5jdXJyZW50LnRvcCArIG9mZnNldCA6IGlubmVyU2Nyb2xsVG9wICsgZWxlbWVudFJlY3QudG9wICsgb2Zmc2V0O1xuICAgIHZhciBlbGVtZW50U2Nyb2xsQm90dG9tID0gZWxlbWVudFNjcm9sbFRvcCArIGVsZW1lbnRSZWN0LmhlaWdodDtcbiAgICByZXR1cm4gW2VsZW1lbnRTY3JvbGxUb3AgPCBpbm5lclNjcm9sbEJvdHRvbSwgZWxlbWVudFNjcm9sbEJvdHRvbSA+IGlubmVyU2Nyb2xsVG9wXS5ldmVyeShmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfSk7XG4gIH0sIFtyb290RWwsIG9mZnNldF0pO1xuICB2YXIgZ2V0RWxlbWVudHNTdGF0dXNJblZpZXdwb3J0ID0gcmVhY3QudXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBzZWN0aW9uUmVmcy5tYXAoZnVuY3Rpb24gKHNlY3Rpb25SZWYpIHtcbiAgICAgIGlmIChzZWN0aW9uUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuIGlzRWxlbWVudEluVmlld3BvcnQoc2VjdGlvblJlZi5jdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9LCBbaXNFbGVtZW50SW5WaWV3cG9ydCwgc2VjdGlvblJlZnNdKTtcblxuICB2YXIgX3VzZVN0YXRlID0gcmVhY3QudXNlU3RhdGUoW10pLFxuICAgICAgZWxlbWVudHNTdGF0dXNJblZpZXdwb3J0ID0gX3VzZVN0YXRlWzBdLFxuICAgICAgdXBkYXRlRWxlbWVudHNTdGF0dXNJblZpZXdwb3J0ID0gX3VzZVN0YXRlWzFdO1xuXG4gIHZhciBjdXJyZW50RWxlbWVudEluZGV4SW5WaWV3cG9ydCA9IHJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBlbGVtZW50c1N0YXR1c0luVmlld3BvcnQuZmluZEluZGV4KGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgfSk7XG4gIH0sIFtlbGVtZW50c1N0YXR1c0luVmlld3BvcnRdKTtcbiAgdmFyIHNweSA9IHJlYWN0LnVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3RWxlbWVudHNTdGF0dXNJblZpZXdwb3J0ID0gaXNTY3JvbGxlZFRvQm90dG9tKCkgPyBbXS5jb25jYXQobmV3IEFycmF5KHNlY3Rpb25SZWZzLmxlbmd0aCAtIDEpLmZpbGwoZmFsc2UpLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfSksIFt0cnVlXSkgOiBnZXRFbGVtZW50c1N0YXR1c0luVmlld3BvcnQoKTtcbiAgICB1cGRhdGVFbGVtZW50c1N0YXR1c0luVmlld3BvcnQobmV3RWxlbWVudHNTdGF0dXNJblZpZXdwb3J0KTtcbiAgfSwgW2dldEVsZW1lbnRzU3RhdHVzSW5WaWV3cG9ydCwgaXNTY3JvbGxlZFRvQm90dG9tLCBzZWN0aW9uUmVmc10pO1xuICByZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHNweSgpO1xuXG4gICAgaWYgKHJvb3RFbC5jdXJyZW50KSB7XG4gICAgICByb290RWwuY3VycmVudC5yZWdpc3RlclNjcm9sbEV2ZW50KHNweSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChyb290RWwuY3VycmVudCkge1xuICAgICAgICByb290RWwuY3VycmVudC51bnJlZ2lzdGVyU2Nyb2xsRXZlbnQoc3B5KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbc3B5XSk7XG4gIHJldHVybiB7XG4gICAgZWxlbWVudHNTdGF0dXNJblZpZXdwb3J0OiBlbGVtZW50c1N0YXR1c0luVmlld3BvcnQsXG4gICAgY3VycmVudEVsZW1lbnRJbmRleEluVmlld3BvcnQ6IGN1cnJlbnRFbGVtZW50SW5kZXhJblZpZXdwb3J0XG4gIH07XG59O1xuXG52YXIgU2Nyb2xsc3B5ID0gZnVuY3Rpb24gU2Nyb2xsc3B5KF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIHNlY3Rpb25SZWZzID0gX3JlZi5zZWN0aW9uUmVmcyxcbiAgICAgIHJvb3RTZWxlY3RvciA9IF9yZWYucm9vdFNlbGVjdG9yLFxuICAgICAgb2Zmc2V0ID0gX3JlZi5vZmZzZXQ7XG5cbiAgdmFyIF91c2VTY3JvbGxzcHkgPSB1c2VTY3JvbGxzcHkoe1xuICAgIHNlY3Rpb25SZWZzOiBzZWN0aW9uUmVmcyxcbiAgICByb290U2VsZWN0b3I6IHJvb3RTZWxlY3RvcixcbiAgICBvZmZzZXQ6IG9mZnNldFxuICB9KSxcbiAgICAgIGVsZW1lbnRzU3RhdHVzSW5WaWV3cG9ydCA9IF91c2VTY3JvbGxzcHkuZWxlbWVudHNTdGF0dXNJblZpZXdwb3J0LFxuICAgICAgY3VycmVudEVsZW1lbnRJbmRleEluVmlld3BvcnQgPSBfdXNlU2Nyb2xsc3B5LmN1cnJlbnRFbGVtZW50SW5kZXhJblZpZXdwb3J0O1xuXG4gIHJldHVybiBjaGlsZHJlbih7XG4gICAgZWxlbWVudHNTdGF0dXNJblZpZXdwb3J0OiBlbGVtZW50c1N0YXR1c0luVmlld3BvcnQsXG4gICAgY3VycmVudEVsZW1lbnRJbmRleEluVmlld3BvcnQ6IGN1cnJlbnRFbGVtZW50SW5kZXhJblZpZXdwb3J0XG4gIH0pO1xufTtcblxudmFyIFBhZ2luYXRpb24gPSBmdW5jdGlvbiBQYWdpbmF0aW9uKF9yZWYpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgY3VycmVudFBhZ2UgPSBfcmVmLmN1cnJlbnRQYWdlLFxuICAgICAgdG90YWxQYWdlID0gX3JlZi50b3RhbFBhZ2UsXG4gICAgICBfcmVmJG1pZGRsZVBhZ2VzU2libGkgPSBfcmVmLm1pZGRsZVBhZ2VzU2libGluZ0NvdW50LFxuICAgICAgbWlkZGxlUGFnZXNTaWJsaW5nQ291bnQgPSBfcmVmJG1pZGRsZVBhZ2VzU2libGkgPT09IHZvaWQgMCA/IDIgOiBfcmVmJG1pZGRsZVBhZ2VzU2libGksXG4gICAgICBfcmVmJGVkZ2VQYWdlQ291bnQgPSBfcmVmLmVkZ2VQYWdlQ291bnQsXG4gICAgICBlZGdlUGFnZUNvdW50ID0gX3JlZiRlZGdlUGFnZUNvdW50ID09PSB2b2lkIDAgPyAyIDogX3JlZiRlZGdlUGFnZUNvdW50O1xuXG4gIHRoaXMuZ2V0QWxsUGFnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFtdLmNvbmNhdChBcnJheShfdGhpcy50b3RhbFBhZ2UpKS5maWxsKDEpLm1hcChmdW5jdGlvbiAoXywgaSkge1xuICAgICAgcmV0dXJuIGkgKyAxO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuZ2V0TWlkZGxlUGFnZUNvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdGhpcy5taWRkbGVQYWdlc1NpYmxpbmdDb3VudCAqIDIgKyAxO1xuICB9O1xuXG4gIHRoaXMuaXNSZWFjaGVkVG9GaXJzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3RoaXMuY3VycmVudFBhZ2UgPD0gX3RoaXMubWlkZGxlUGFnZXNTaWJsaW5nQ291bnQ7XG4gIH07XG5cbiAgdGhpcy5pc1JlYWNoZWRUb0xhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF90aGlzLmN1cnJlbnRQYWdlICsgX3RoaXMubWlkZGxlUGFnZXNTaWJsaW5nQ291bnQgPj0gX3RoaXMudG90YWxQYWdlO1xuICB9O1xuXG4gIHRoaXMuZ2V0QWxsUHJldmlvdXNQYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3RoaXMuZ2V0QWxsUGFnZXMoKS5zbGljZSgwLCBfdGhpcy5nZXRNaWRkbGVQYWdlcygpWzBdIC0gMSk7XG4gIH07XG5cbiAgdGhpcy5nZXRBbGxOZXh0UGFnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRvdGFsUGFnZUl0ZW1zID0gX3RoaXMuZ2V0QWxsUGFnZXMoKTtcblxuICAgIHZhciBtaWRkbGVQYWdlcyA9IF90aGlzLmdldE1pZGRsZVBhZ2VzKCk7XG5cbiAgICByZXR1cm4gdG90YWxQYWdlSXRlbXMuc2xpY2UobWlkZGxlUGFnZXNbbWlkZGxlUGFnZXMubGVuZ3RoIC0gMV0sIHRvdGFsUGFnZUl0ZW1zW3RvdGFsUGFnZUl0ZW1zLmxlbmd0aF0pO1xuICB9O1xuXG4gIHRoaXMuaGFzUHJldmlvdXNQYWdlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdGhpcy5jdXJyZW50UGFnZSA+IDE7XG4gIH07XG5cbiAgdGhpcy5oYXNOZXh0UGFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3RoaXMudG90YWxQYWdlID4gX3RoaXMuY3VycmVudFBhZ2U7XG4gIH07XG5cbiAgdGhpcy5nZXRNaWRkbGVQYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdG90YWxQYWdlSXRlbXMgPSBfdGhpcy5nZXRBbGxQYWdlcygpO1xuXG4gICAgdmFyIG1pZGRsZVBhZ2VDb3VudCA9IF90aGlzLmdldE1pZGRsZVBhZ2VDb3VudCgpO1xuXG4gICAgaWYgKF90aGlzLmlzUmVhY2hlZFRvRmlyc3QoKSkge1xuICAgICAgcmV0dXJuIHRvdGFsUGFnZUl0ZW1zLnNsaWNlKDAsIG1pZGRsZVBhZ2VDb3VudCk7XG4gICAgfVxuXG4gICAgaWYgKF90aGlzLmlzUmVhY2hlZFRvTGFzdCgpKSB7XG4gICAgICByZXR1cm4gdG90YWxQYWdlSXRlbXMuc2xpY2UoLW1pZGRsZVBhZ2VDb3VudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvdGFsUGFnZUl0ZW1zLnNsaWNlKF90aGlzLmN1cnJlbnRQYWdlIC0gX3RoaXMubWlkZGxlUGFnZXNTaWJsaW5nQ291bnQgLSAxLCBfdGhpcy5jdXJyZW50UGFnZSArIF90aGlzLm1pZGRsZVBhZ2VzU2libGluZ0NvdW50KTtcbiAgfTtcblxuICB0aGlzLmdldFByZXZpb3VzUGFnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKF90aGlzLmlzUmVhY2hlZFRvRmlyc3QoKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGlmIChfdGhpcy5nZXRBbGxQcmV2aW91c1BhZ2VzKCkubGVuZ3RoIDwgMSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBfdGhpcy5nZXRBbGxQYWdlcygpLnNsaWNlKDAsIF90aGlzLmVkZ2VQYWdlQ291bnQpLmZpbHRlcihmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuICFfdGhpcy5nZXRNaWRkbGVQYWdlcygpLmluY2x1ZGVzKHApO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuZ2V0TmV4dFBhZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChfdGhpcy5pc1JlYWNoZWRUb0xhc3QoKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGlmIChfdGhpcy5nZXRBbGxOZXh0UGFnZXMoKS5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIHRvdGFsUGFnZXMgPSBfdGhpcy5nZXRBbGxQYWdlcygpO1xuXG4gICAgcmV0dXJuIHRvdGFsUGFnZXMuc2xpY2UodG90YWxQYWdlcy5sZW5ndGggLSBfdGhpcy5lZGdlUGFnZUNvdW50LCB0b3RhbFBhZ2VzLmxlbmd0aCkuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gIV90aGlzLmdldE1pZGRsZVBhZ2VzKCkuaW5jbHVkZXMocCk7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5pc1ByZXZpb3VzVHJ1bmNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdGhpcy5nZXRBbGxQcmV2aW91c1BhZ2VzKCkuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gIV90aGlzLmdldFByZXZpb3VzUGFnZXMoKS5pbmNsdWRlcyhwKSAmJiAhX3RoaXMuZ2V0TWlkZGxlUGFnZXMoKS5pbmNsdWRlcyhwKTtcbiAgICB9KS5sZW5ndGggPiAwO1xuICB9O1xuXG4gIHRoaXMuaXNOZXh0VHJ1bmNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdGhpcy5nZXRBbGxOZXh0UGFnZXMoKS5maWx0ZXIoZnVuY3Rpb24gKHApIHtcbiAgICAgIHJldHVybiAhX3RoaXMuZ2V0TmV4dFBhZ2VzKCkuaW5jbHVkZXMocCkgJiYgIV90aGlzLmdldE1pZGRsZVBhZ2VzKCkuaW5jbHVkZXMocCk7XG4gICAgfSkubGVuZ3RoID4gMDtcbiAgfTtcblxuICB0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2U7XG4gIHRoaXMudG90YWxQYWdlID0gdG90YWxQYWdlO1xuICB0aGlzLm1pZGRsZVBhZ2VzU2libGluZ0NvdW50ID0gbWlkZGxlUGFnZXNTaWJsaW5nQ291bnQ7XG4gIHRoaXMuZWRnZVBhZ2VDb3VudCA9IGVkZ2VQYWdlQ291bnQ7XG59O1xuXG52YXIgTUlERExFX1BBR0VTX1NJQkxJTkdfQ09VTlQgPSAyO1xudmFyIEVER0VfUEFHRV9DT1VOVCA9IDI7XG52YXIgdXNlUGFnaW5hdGlvbiA9IGZ1bmN0aW9uIHVzZVBhZ2luYXRpb24oX3JlZikge1xuICB2YXIgdG90YWxQYWdlID0gX3JlZi50b3RhbFBhZ2UsXG4gICAgICBjdXJyZW50UGFnZSA9IF9yZWYuY3VycmVudFBhZ2UsXG4gICAgICBfcmVmJG1pZGRsZVBhZ2VzU2libGkgPSBfcmVmLm1pZGRsZVBhZ2VzU2libGluZ0NvdW50LFxuICAgICAgbWlkZGxlUGFnZXNTaWJsaW5nQ291bnQgPSBfcmVmJG1pZGRsZVBhZ2VzU2libGkgPT09IHZvaWQgMCA/IE1JRERMRV9QQUdFU19TSUJMSU5HX0NPVU5UIDogX3JlZiRtaWRkbGVQYWdlc1NpYmxpLFxuICAgICAgX3JlZiRlZGdlUGFnZUNvdW50ID0gX3JlZi5lZGdlUGFnZUNvdW50LFxuICAgICAgZWRnZVBhZ2VDb3VudCA9IF9yZWYkZWRnZVBhZ2VDb3VudCA9PT0gdm9pZCAwID8gRURHRV9QQUdFX0NPVU5UIDogX3JlZiRlZGdlUGFnZUNvdW50O1xuICB2YXIgcGFnaW5hdGlvbiA9IHJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgUGFnaW5hdGlvbih7XG4gICAgICB0b3RhbFBhZ2U6IHRvdGFsUGFnZSxcbiAgICAgIGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZSxcbiAgICAgIG1pZGRsZVBhZ2VzU2libGluZ0NvdW50OiBtaWRkbGVQYWdlc1NpYmxpbmdDb3VudCxcbiAgICAgIGVkZ2VQYWdlQ291bnQ6IGVkZ2VQYWdlQ291bnRcbiAgICB9KTtcbiAgfSwgW3RvdGFsUGFnZSwgY3VycmVudFBhZ2UsIG1pZGRsZVBhZ2VzU2libGluZ0NvdW50LCBlZGdlUGFnZUNvdW50XSk7XG4gIHJldHVybiB7XG4gICAgZ2V0TWlkZGxlUGFnZXM6IHBhZ2luYXRpb24uZ2V0TWlkZGxlUGFnZXMsXG4gICAgaGFzUHJldmlvdXNQYWdlOiBwYWdpbmF0aW9uLmhhc1ByZXZpb3VzUGFnZSxcbiAgICBoYXNOZXh0UGFnZTogcGFnaW5hdGlvbi5oYXNOZXh0UGFnZSxcbiAgICBnZXRQcmV2aW91c1BhZ2VzOiBwYWdpbmF0aW9uLmdldFByZXZpb3VzUGFnZXMsXG4gICAgZ2V0TmV4dFBhZ2VzOiBwYWdpbmF0aW9uLmdldE5leHRQYWdlcyxcbiAgICBpc1ByZXZpb3VzVHJ1bmNhYmxlOiBwYWdpbmF0aW9uLmlzUHJldmlvdXNUcnVuY2FibGUsXG4gICAgaXNOZXh0VHJ1bmNhYmxlOiBwYWdpbmF0aW9uLmlzTmV4dFRydW5jYWJsZSxcbiAgICB0b3RhbFBhZ2U6IHRvdGFsUGFnZSxcbiAgICBjdXJyZW50UGFnZTogY3VycmVudFBhZ2VcbiAgfTtcbn07XG5cbnZhciBQYWdpbmF0aW9uJDEgPSBmdW5jdGlvbiBQYWdpbmF0aW9uKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIHRvdGFsUGFnZSA9IF9yZWYudG90YWxQYWdlLFxuICAgICAgY3VycmVudFBhZ2UgPSBfcmVmLmN1cnJlbnRQYWdlLFxuICAgICAgbWlkZGxlUGFnZXNTaWJsaW5nQ291bnQgPSBfcmVmLm1pZGRsZVBhZ2VzU2libGluZ0NvdW50LFxuICAgICAgZWRnZVBhZ2VDb3VudCA9IF9yZWYuZWRnZVBhZ2VDb3VudDtcbiAgdmFyIHBhZ2luYXRpb24gPSB1c2VQYWdpbmF0aW9uKHtcbiAgICB0b3RhbFBhZ2U6IHRvdGFsUGFnZSxcbiAgICBjdXJyZW50UGFnZTogY3VycmVudFBhZ2UsXG4gICAgbWlkZGxlUGFnZXNTaWJsaW5nQ291bnQ6IG1pZGRsZVBhZ2VzU2libGluZ0NvdW50LFxuICAgIGVkZ2VQYWdlQ291bnQ6IGVkZ2VQYWdlQ291bnRcbiAgfSk7XG4gIHJldHVybiBjaGlsZHJlbihwYWdpbmF0aW9uKTtcbn07XG5cbmV4cG9ydHMuUGFnaW5hdGlvbiA9IFBhZ2luYXRpb24kMTtcbmV4cG9ydHMuUmVhZGluZ1Byb2dyZXNzID0gUmVhZGluZ1Byb2dyZXNzJDE7XG5leHBvcnRzLlNjcm9sbHNweSA9IFNjcm9sbHNweTtcbmV4cG9ydHMudXNlUGFnaW5hdGlvbiA9IHVzZVBhZ2luYXRpb247XG5leHBvcnRzLnVzZVJlYWRpbmdQcm9ncmVzcyA9IHVzZVJlYWRpbmdQcm9ncmVzcztcbmV4cG9ydHMudXNlU2Nyb2xsc3B5ID0gdXNlU2Nyb2xsc3B5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2hvc3R1aS5janMuZGV2ZWxvcG1lbnQuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@makotot/ghostui/dist/ghostui.cjs.development.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@makotot/ghostui/dist/index.js":
/*!******************************************************!*\
  !*** ../node_modules/@makotot/ghostui/dist/index.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./ghostui.cjs.development.js */ \"(ssr)/../node_modules/@makotot/ghostui/dist/ghostui.cjs.development.js\")\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BtYWtvdG90L2dob3N0dWkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiO0FBQ1k7O0FBRVosSUFBSSxLQUFxQyxFQUFFLEVBRTFDLENBQUM7QUFDRixFQUFFLGtKQUF3RDtBQUMxRCIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250Ly4uL25vZGVfbW9kdWxlcy9AbWFrb3RvdC9naG9zdHVpL2Rpc3QvaW5kZXguanM/YTg5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2Ugc3RyaWN0J1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZ2hvc3R1aS5janMucHJvZHVjdGlvbi5taW4uanMnKVxufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2dob3N0dWkuY2pzLmRldmVsb3BtZW50LmpzJylcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@makotot/ghostui/dist/index.js\n");

/***/ })

};
;